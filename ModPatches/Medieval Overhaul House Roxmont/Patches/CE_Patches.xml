<?xml version="1.0" encoding="utf-8"?>
<Patch>

	<!-- ==================== PawnKinds ==================== -->

	<Operation Class="PatchOperationAddModExtension">
		<xpath>Defs/PawnKindDef[defName="DankPyon_HedgeKnightRox"]</xpath>
		<value>
			<li Class="CombatExtended.LoadoutPropertiesExtension">
				<primaryMagazineCount>
					<min>3</min>
					<max>5</max>
				</primaryMagazineCount>
				<shieldMoney>
					<min>150</min>
					<max>250</max>
				</shieldMoney>
				<shieldTags>
					<li>DankPyon_ShieldHeater_Roxmont</li>
				</shieldTags>
				<shieldChance>0.5</shieldChance>
				<forcedSidearm>
					<sidearmMoney>
						<min>50</min>
						<max>200</max>
					</sidearmMoney>
					<weaponTags>
						<li>CE_Sidearm_Tribal</li>
					</weaponTags>
				</forcedSidearm>
			</li>
		</value>
	</Operation>

	<Operation Class="PatchOperationRemove">
		<xpath>Defs/PawnKindDef[defName="DankPyon_FootmanRoxmont"]/apparelRequired/li[.="DankPyon_ShieldHeater_Roxmont"]</xpath>
	</Operation>

	<Operation Class="PatchOperationAddModExtension">
		<xpath>Defs/PawnKindDef[defName="DankPyon_FootmanRoxmont"]</xpath>
		<value>
			<li Class="CombatExtended.LoadoutPropertiesExtension">
				<shieldMoney>
					<min>100</min>
					<max>350</max>
				</shieldMoney>
				<shieldTags>
					<li>DankPyon_ShieldHeater_Roxmont</li>
				</shieldTags>
				<shieldChance>0.65</shieldChance>
			</li>
		</value>
	</Operation>

	<Operation Class="PatchOperationAddModExtension">
		<xpath>Defs/PawnKindDef[defName="DankPyon_StandardRoxmont"] </xpath>
		<value>
			<li Class="CombatExtended.LoadoutPropertiesExtension">
				<shieldMoney>
					<min>100</min>
					<max>350</max>
				</shieldMoney>
				<shieldTags>
					<li>KiteShield</li>
					<li>HeaterShield</li>
					<li>Buckler</li>
				</shieldTags>
				<shieldChance>0.65</shieldChance>
			</li>
		</value>
	</Operation>

	<Operation Class="PatchOperationAddModExtension">
		<xpath>Defs/PawnKindDef[defName="DankPyon_KnightRoxmont" or defName="DankPyon_Medieval_LordRoxmont"]</xpath>
		<value>
			<li Class="CombatExtended.LoadoutPropertiesExtension">
				<shieldMoney>
					<min>200</min>
					<max>600</max>
				</shieldMoney>
				<shieldTags>
					<li>HeaterShield</li>
					<li>KiteShield</li>
				</shieldTags>
				<shieldChance>0.5</shieldChance>
			</li>
		</value>
	</Operation>

	<!-- ==================== Apparel ==================== -->

	<!-- ========== Helmet ========== -->

	<Operation Class="PatchOperationAdd">
		<xpath>Defs/ThingDef[defName="DankPyon_Headgear_HeraldicGreatHelmRoxmont"]</xpath>
		<value>
			<statBases>
				<Bulk>6</Bulk>
				<WornBulk>1</WornBulk>
				<Mass>4</Mass>
				<StuffEffectMultiplierArmor>3</StuffEffectMultiplierArmor>
			</statBases>
		</value>
	</Operation>

	<Operation Class="PatchOperationAdd">
		<xpath>Defs/ThingDef[defName="DankPyon_Headgear_HeraldicGreatHelmRoxmont"]</xpath>
		<value>
			<equippedStatOffsets Inherit="False">
				<AimingAccuracy>-0.4</AimingAccuracy>
				<MeleeHitChance>-2</MeleeHitChance>
			</equippedStatOffsets>
		</value>
	</Operation>

	<Operation Class="PatchOperationAddModExtension">
		<xpath>Defs/ThingDef[defName="DankPyon_Headgear_HeraldicGreatHelmRoxmont"]</xpath>
		<value>
			<li Class="CombatExtended.PartialArmorExt">
				<stats>
					<li>
						<ArmorRating_Sharp>0.60</ArmorRating_Sharp>
						<parts>
							<li>Eye</li>
						</parts>
					</li>
					<li>
						<ArmorRating_Blunt>0.60</ArmorRating_Blunt>
						<parts>
							<li>Eye</li>
						</parts>
					</li>
				</stats>
			</li>
		</value>
	</Operation>

	<!-- ========== Armors ========== -->

	<Operation Class="PatchOperationAdd">
		<xpath>Defs/ThingDef[defName="DankPyon_Apparel_Zweihanders_Cuirass_Roxmont"]/statBases</xpath>
		<value>
			<Bulk>20</Bulk>
			<WornBulk>5</WornBulk>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<xpath>Defs/ThingDef[defName="DankPyon_Apparel_Zweihanders_Cuirass_Roxmont"]/statBases/StuffEffectMultiplierArmor</xpath>
		<value>
			<StuffEffectMultiplierArmor>4.5</StuffEffectMultiplierArmor>
		</value>
	</Operation>

	<Operation Class="PatchOperationRemove">
		<xpath>Defs/ThingDef[defName="DankPyon_Apparel_Zweihanders_Cuirass_Roxmont"]/equippedStatOffsets/MoveSpeed</xpath>
	</Operation>

	<Operation Class="PatchOperationAddModExtension">
		<xpath>Defs/ThingDef[defName="DankPyon_Apparel_Zweihanders_Cuirass_Roxmont"]</xpath>
		<value>
			<li Class="CombatExtended.PartialArmorExt">
				<stats>
					<li>
						<ArmorRating_Sharp>0.40</ArmorRating_Sharp>
						<parts>
							<li>Neck</li>
						</parts>
					</li>
					<li>
						<ArmorRating_Blunt>0.40</ArmorRating_Blunt>
						<parts>
							<li>Neck</li>
						</parts>
					</li>
					<li>
						<ArmorRating_Sharp>0.60</ArmorRating_Sharp>
						<parts>
							<li>Shoulder</li>
						</parts>
					</li>
					<li>
						<ArmorRating_Blunt>0.60</ArmorRating_Blunt>
						<parts>
							<li>Shoulder</li>
						</parts>
					</li>
				</stats>
			</li>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<xpath>Defs/ThingDef[defName="DankPyon_Apparel_FullPlate_Roxmont"]/statBases/Mass</xpath>
		<value>
			<Bulk>100</Bulk>
			<WornBulk>12</WornBulk>
			<Mass>17</Mass>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<xpath>Defs/ThingDef[defName="DankPyon_Apparel_FullPlate_Roxmont"]/statBases/StuffEffectMultiplierArmor</xpath>
		<value>
			<StuffEffectMultiplierArmor>4</StuffEffectMultiplierArmor>
		</value>
	</Operation>

	<Operation Class="PatchOperationRemove">
		<xpath>Defs/ThingDef[defName="DankPyon_Apparel_FullPlate_Roxmont"]/equippedStatOffsets/MoveSpeed</xpath>
	</Operation>

	<Operation Class="PatchOperationAdd">
		<xpath>Defs/ThingDef[defName="DankPyon_Apparel_FullPlate_Roxmont"]/equippedStatOffsets</xpath>
		<value>
			<MeleeDodgeChance>-0.2</MeleeDodgeChance>
		</value>
	</Operation>

	<Operation Class="PatchOperationAdd">
		<xpath>Defs/ThingDef[defName="DankPyon_Apparel_FullPlate_Roxmont"]/apparel/bodyPartGroups</xpath>
		<value>
			<li>Hands</li>
			<li>Feet</li>
		</value>
	</Operation>

	<Operation Class="PatchOperationAddModExtension">
		<xpath>Defs/ThingDef[defName="DankPyon_Apparel_FullPlate_Roxmont"]</xpath>
		<value>
			<li Class="CombatExtended.PartialArmorExt">
				<stats>
					<li>
						<ArmorRating_Sharp>0.70</ArmorRating_Sharp>
						<parts>
							<li>Neck</li>
						</parts>
					</li>
					<li>
						<ArmorRating_Blunt>0.70</ArmorRating_Blunt>
						<parts>
							<li>Neck</li>
						</parts>
					</li>
					<li>
						<ArmorRating_Sharp>0.90</ArmorRating_Sharp>
						<parts>
							<li>Leg</li>
						</parts>
					</li>
					<li>
						<ArmorRating_Blunt>0.90</ArmorRating_Blunt>
						<parts>
							<li>Leg</li>
						</parts>
					</li>
					<li>
						<ArmorRating_Sharp>0.80</ArmorRating_Sharp>
						<parts>
							<li>Arm</li>
						</parts>
					</li>
					<li>
						<ArmorRating_Blunt>0.80</ArmorRating_Blunt>
						<parts>
							<li>Arm</li>
						</parts>
					</li>
					<li>
						<ArmorRating_Sharp>0.60</ArmorRating_Sharp>
						<parts>
							<li>Hand</li>
						</parts>
					</li>
					<li>
						<ArmorRating_Blunt>0.60</ArmorRating_Blunt>
						<parts>
							<li>Hand</li>
						</parts>
					</li>
				</stats>
			</li>
		</value>
	</Operation>

	<!-- ==================== Shield ==================== -->

	<Operation Class="PatchOperationRemove">
		<xpath>Defs/ThingDef[defName="DankPyon_ShieldHeater_Roxmont"]/comps/li[@Class="VFECore.CompProperties_Shield"]</xpath>
	</Operation>

	<Operation Class="PatchOperationAdd">
		<xpath>Defs/ThingDef[defName="DankPyon_ShieldHeater_Roxmont"]</xpath>
		<value>
			<apparel>
				<tags>
					<li>DankPyon_ShieldHeater_Roxmont</li>
				</tags>
				<renderNodeProperties>
					<li>
						<nodeClass>CombatExtended.PawnRenderNode_Apparel</nodeClass>
						<workerClass>CombatExtended.PawnRenderNodeWorker_Drafted</workerClass>
						<texPath>HouseRoxmont/Apparel/Utility/HeaterRoxmont/HeaterRoxmont</texPath>
						<shaderTypeDef>CutoutComplex</shaderTypeDef>
						<parentTagDef>ApparelBody</parentTagDef>
						<drawData>
							<scale>0.55</scale>
							<defaultData>
								<layer>80</layer>
							</defaultData>
							<dataEast>
								<layer>-5</layer>
								<offset>(0, 0, -0.1)</offset>
								<rotationOffset>30</rotationOffset>
							</dataEast>
							<dataWest>
								<rotationOffset>-30</rotationOffset>
							</dataWest>
							<dataNorth>
								<layer>-5</layer>
								<offset>(0.2, 0, -0.2)</offset>
							</dataNorth>
							<dataSouth>
								<offset>(0.2, 0, -0.2)</offset>
							</dataSouth>
						</drawData>
					</li>
				</renderNodeProperties>
			</apparel>
		</value>
	</Operation>

	<!-- ==================== Weapons ==================== -->

	<!-- ========== Pike ========== -->

	<Operation Class="PatchOperationAdd">
		<xpath>Defs/ThingDef[defName="DankPyon_MeleeWeapon_PikeRoxmont"]</xpath>
		<value>
			<statBases>
				<Bulk>12</Bulk>
				<MeleeCounterParryBonus>1.27</MeleeCounterParryBonus>
			</statBases>
			<equippedStatOffsets>
				<MeleeCritChance>0.08</MeleeCritChance>
				<MeleeParryChance>0.95</MeleeParryChance>
				<MeleeDodgeChance>1.27</MeleeDodgeChance>
			</equippedStatOffsets>
			<tools>
				<li Class="CombatExtended.ToolCE">
					<label>shaft</label>
					<capacities>
						<li>Poke</li>
					</capacities>
					<power>8</power>
					<cooldownTime>1.3</cooldownTime>
					<chanceFactor>0.1</chanceFactor>
					<armorPenetrationBlunt>1.8</armorPenetrationBlunt>
					<linkedBodyPartsGroup>Shaft</linkedBodyPartsGroup>
				</li>
				<li Class="CombatExtended.ToolCE">
					<label>point</label>
					<capacities>
						<li>Stab</li>
					</capacities>
					<power>20</power>
					<cooldownTime>1.5</cooldownTime>
					<armorPenetrationBlunt>6</armorPenetrationBlunt>
					<armorPenetrationSharp>3</armorPenetrationSharp>
					<linkedBodyPartsGroup>Point</linkedBodyPartsGroup>
				</li>
			</tools>
		</value>
	</Operation>

	<!-- ========== Waraxe ========== -->

	<Operation Class="PatchOperationAdd">
		<xpath>Defs/ThingDef[defName="DankPyon_MeleeWeapon_RoxWaraxe"]/statBases</xpath>
		<value>
			<Bulk>7</Bulk>
			<MeleeCounterParryBonus>0.35</MeleeCounterParryBonus>
		</value>
	</Operation>

	<Operation Class="PatchOperationAdd">
		<xpath>Defs/ThingDef[defName="DankPyon_MeleeWeapon_RoxWaraxe"]</xpath>
		<value>
			<equippedStatOffsets>
				<MeleeCritChance>0.30</MeleeCritChance>
				<MeleeParryChance>0.40</MeleeParryChance>
				<MeleeDodgeChance>0.23</MeleeDodgeChance>
			</equippedStatOffsets>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<xpath>Defs/ThingDef[defName="DankPyon_MeleeWeapon_RoxWaraxe"]/tools</xpath>
		<value>
			<tools>
				<li Class="CombatExtended.ToolCE">
					<label>shaft</label>
					<capacities>
						<li>Poke</li>
					</capacities>
					<power>3</power>
					<cooldownTime>1.3</cooldownTime>
					<chanceFactor>0.1</chanceFactor>
					<armorPenetrationBlunt>0.8</armorPenetrationBlunt>
					<linkedBodyPartsGroup>Shaft</linkedBodyPartsGroup>
				</li>
				<li Class="CombatExtended.ToolCE">
					<label>point</label>
					<capacities>
						<li>Stab</li>
					</capacities>
					<power>22</power>
					<cooldownTime>1.7</cooldownTime>
					<armorPenetrationBlunt>5</armorPenetrationBlunt>
					<armorPenetrationSharp>2.5</armorPenetrationSharp>
					<linkedBodyPartsGroup>Point</linkedBodyPartsGroup>
				</li>
				<li Class="CombatExtended.ToolCE">
					<label>edge</label>
					<capacities>
						<li>Cut</li>
					</capacities>
					<power>37</power>
					<cooldownTime>2.18</cooldownTime>
					<armorPenetrationBlunt>9.6</armorPenetrationBlunt>
					<armorPenetrationSharp>1.0</armorPenetrationSharp>
					<linkedBodyPartsGroup>Edge</linkedBodyPartsGroup>
				</li>
			</tools>
		</value>
	</Operation>

</Patch>