<?xml version="1.0" encoding="utf-8"?>
<Patch>

	<!-- ========== Tools ========== -->

	<Operation Class="PatchOperationReplace">
		<xpath>Defs/ThingDef[defName="Gun_Caseless_Pistol"]/tools</xpath>
		<value>
			<tools>
				<li Class="CombatExtended.ToolCE">
					<label>grip</label>
					<capacities>
						<li>Blunt</li>
					</capacities>
					<power>2</power>
					<cooldownTime>1.54</cooldownTime>
					<chanceFactor>1.5</chanceFactor>
					<armorPenetrationBlunt>0.555</armorPenetrationBlunt>
					<linkedBodyPartsGroup>Grip</linkedBodyPartsGroup>
				</li>
				<li Class="CombatExtended.ToolCE">
					<label>muzzle</label>
					<capacities>
						<li>Poke</li>
					</capacities>
					<power>2</power>
					<cooldownTime>1.54</cooldownTime>
					<armorPenetrationBlunt>0.555</armorPenetrationBlunt>
					<linkedBodyPartsGroup>Muzzle</linkedBodyPartsGroup>
				</li>
			</tools>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<xpath>Defs/ThingDef[@Name="CaselessGunMMeleeBase"]/tools</xpath>
		<value>
			<tools>
				<li Class="CombatExtended.ToolCE">
					<label>stock</label>
					<capacities>
						<li>Blunt</li>
					</capacities>
					<power>8</power>
					<cooldownTime>1.55</cooldownTime>
					<chanceFactor>1.5</chanceFactor>
					<armorPenetrationBlunt>2.755</armorPenetrationBlunt>
					<linkedBodyPartsGroup>Stock</linkedBodyPartsGroup>
				</li>
				<li Class="CombatExtended.ToolCE">
					<label>barrel</label>
					<capacities>
						<li>Blunt</li>
					</capacities>
					<power>5</power>
					<cooldownTime>2.02</cooldownTime>
					<armorPenetrationBlunt>1.630</armorPenetrationBlunt>
					<linkedBodyPartsGroup>Barrel</linkedBodyPartsGroup>
				</li>
				<li Class="CombatExtended.ToolCE">
					<label>muzzle</label>
					<capacities>
						<li>Poke</li>
					</capacities>
					<power>8</power>
					<cooldownTime>1.55</cooldownTime>
					<armorPenetrationBlunt>2.755</armorPenetrationBlunt>
					<linkedBodyPartsGroup>Muzzle</linkedBodyPartsGroup>
				</li>
			</tools>
		</value>
	</Operation>

	<!-- ========== K-5 ========== -->

	<Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
		<defName>Gun_Caseless_Pistol</defName>
		<statBases>
			<Mass>0.73</Mass>
			<RangedWeapon_Cooldown>0.38</RangedWeapon_Cooldown>
			<SightsEfficiency>0.7</SightsEfficiency>
			<ShotSpread>0.18</ShotSpread>
			<SwayFactor>0.84</SwayFactor>
			<Bulk>1.78</Bulk>
			<WorkToMake>12500</WorkToMake>
		</statBases>
		<costList>
			<Steel>20</Steel>
			<Chemfuel>5</Chemfuel>
			<ComponentIndustrial>5</ComponentIndustrial>
		</costList>
		<Properties>
			<recoilAmount>2.63</recoilAmount>
			<verbClass>CombatExtended.Verb_ShootCE</verbClass>
			<hasStandardCommand>true</hasStandardCommand>
			<defaultProjectile>Bullet_65x21mmCaseless_FMJ</defaultProjectile>
			<warmupTime>0.6</warmupTime>
			<range>12</range>
			<burstShotCount>5</burstShotCount>
			<ticksBetweenBurstShots>3</ticksBetweenBurstShots>
			<soundCast>Shot_kpistol</soundCast>
			<soundCastTail>GunTail_Light</soundCastTail>
			<muzzleFlashScale>4</muzzleFlashScale>
		</Properties>
		<AmmoUser>
			<magazineSize>15</magazineSize>
			<reloadTime>4</reloadTime>
			<ammoSet>AmmoSet_65x21mmCaseless</ammoSet>
		</AmmoUser>
		<FireModes>
			<aimedBurstShotCount>3</aimedBurstShotCount>
			<aiUseBurstMode>FALSE</aiUseBurstMode>
		</FireModes>
		<weaponTags>
			<li>CE_Sidearm</li>
			<li>CE_AI_BROOM</li>
			<li>CE_OneHandedWeapon</li>
		</weaponTags>
		<researchPrerequisite>BlowbackOperation</researchPrerequisite>
	</Operation>

	<!-- ========== CSG-3 ========== -->

	<Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
		<defName>Gun_Caseless_SMG</defName>
		<statBases>
			<Mass>2.3</Mass>
			<RangedWeapon_Cooldown>0.36</RangedWeapon_Cooldown>
			<SightsEfficiency>1</SightsEfficiency>
			<ShotSpread>0.12</ShotSpread>
			<SwayFactor>0.74</SwayFactor>
			<Bulk>5.05</Bulk>
			<WorkToMake>35000</WorkToMake>
		</statBases>
		<costList>
			<Steel>30</Steel>
			<ComponentIndustrial>6</ComponentIndustrial>
			<Chemfuel>10</Chemfuel>
		</costList>
		<Properties>
			<recoilAmount>1.47</recoilAmount>
			<verbClass>CombatExtended.Verb_ShootCE</verbClass>
			<hasStandardCommand>true</hasStandardCommand>
			<defaultProjectile>Bullet_65x21mmCaseless_FMJ</defaultProjectile>
			<warmupTime>0.6</warmupTime>
			<range>16</range>
			<burstShotCount>6</burstShotCount>
			<ticksBetweenBurstShots>4</ticksBetweenBurstShots>
			<soundCast>Shot_CSG</soundCast>
			<soundCastTail>GunTail_Medium</soundCastTail>
			<muzzleFlashScale>5</muzzleFlashScale>
		</Properties>
		<AmmoUser>
			<magazineSize>50</magazineSize>
			<reloadTime>4.5</reloadTime>
			<ammoSet>AmmoSet_65x21mmCaseless</ammoSet>
		</AmmoUser>
		<FireModes>
			<aimedBurstShotCount>3</aimedBurstShotCount>
			<aiUseBurstMode>FALSE</aiUseBurstMode>
		</FireModes>
		<weaponTags>
			<li>CE_SMG</li>
			<li>CE_AI_BROOM</li>
		</weaponTags>
		<researchPrerequisite>BlowbackOperation</researchPrerequisite>
	</Operation>

	<!-- ========== LMG11k ========== -->

	<Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
		<defName>Gun_Caseless_LMG</defName>
		<statBases>
			<Mass>5.53</Mass>
			<RangedWeapon_Cooldown>0.38</RangedWeapon_Cooldown>
			<SightsEfficiency>1</SightsEfficiency>
			<ShotSpread>0.07</ShotSpread>
			<SwayFactor>1.31</SwayFactor>
			<Bulk>7.53</Bulk>
			<WorkToMake>29000</WorkToMake>
		</statBases>
		<costList>
			<Steel>55</Steel>
			<Chemfuel>5</Chemfuel>
			<ComponentIndustrial>5</ComponentIndustrial>
		</costList>
		<Properties>
			<recoilAmount>1.06</recoilAmount>
			<verbClass>CombatExtended.Verb_ShootCE</verbClass>
			<hasStandardCommand>true</hasStandardCommand>
			<defaultProjectile>Bullet_473x33mmCaseless_FMJ</defaultProjectile>
			<warmupTime>1.1</warmupTime>
			<range>68</range>
			<ticksBetweenBurstShots>6</ticksBetweenBurstShots>
			<burstShotCount>10</burstShotCount>
			<soundCast>Shot_CLMG</soundCast>
			<soundCastTail>GunTail_Medium</soundCastTail>
			<muzzleFlashScale>6</muzzleFlashScale>
			<targetParams>
				<canTargetLocations>true</canTargetLocations>
			</targetParams>
			<recoilPattern>Mounted</recoilPattern>
		</Properties>
		<AmmoUser>
			<magazineSize>300</magazineSize>
			<reloadTime>9.2</reloadTime>
			<ammoSet>AmmoSet_473x33mmCaseless</ammoSet>
		</AmmoUser>
		<FireModes>
			<aimedBurstShotCount>5</aimedBurstShotCount>
			<aiUseBurstMode>FALSE</aiUseBurstMode>
			<aiAimMode>SuppressFire</aiAimMode>
		</FireModes>
		<weaponTags>
			<li>CE_MachineGun</li>
			<li>CE_AI_LMG</li>
			<li>Bipod_LMG</li>
		</weaponTags>
		<researchPrerequisite>GasOperation</researchPrerequisite>
	</Operation>

	<!-- ========== Burst Rifle ========== -->

	<Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
		<defName>Gun_Caseless_BurstRifle</defName>
		<statBases>
			<Mass>7.44</Mass>
			<RangedWeapon_Cooldown>0.45</RangedWeapon_Cooldown>
			<SightsEfficiency>2.18</SightsEfficiency>
			<ShotSpread>0.06</ShotSpread>
			<SwayFactor>1.13</SwayFactor>
			<Bulk>7.44</Bulk>
			<WorkToMake>49000</WorkToMake>
		</statBases>
		<costList>
			<Steel>40</Steel>
			<Chemfuel>10</Chemfuel>
			<Plasteel>25</Plasteel>
			<ComponentIndustrial>10</ComponentIndustrial>
		</costList>
		<Properties>
			<recoilAmount>1.29</recoilAmount>
			<verbClass>CombatExtended.Verb_ShootCE</verbClass>
			<hasStandardCommand>true</hasStandardCommand>
			<defaultProjectile>Bullet_473x33mmCaseless_FMJ</defaultProjectile>
			<warmupTime>1.25</warmupTime>
			<range>58</range>
			<ticksBetweenBurstShots>2</ticksBetweenBurstShots>
			<burstShotCount>3</burstShotCount>
			<soundCast>Shot_Burst</soundCast>
			<soundCastTail>GunTail_Medium</soundCastTail>
			<muzzleFlashScale>6</muzzleFlashScale>
		</Properties>
		<AmmoUser>
			<magazineSize>50</magazineSize>
			<reloadTime>4.5</reloadTime>
			<ammoSet>AmmoSet_473x33mmCaseless</ammoSet>
		</AmmoUser>
		<FireModes>
			<aimedBurstShotCount>3</aimedBurstShotCount>
			<aiUseBurstMode>TRUE</aiUseBurstMode>
			<aiAimMode>AimedShot</aiAimMode>
		</FireModes>
		<weaponTags>
			<li>IndustrialGunAdvanced</li>
			<li>CE_AI_AR</li>
		</weaponTags>
		<researchPrerequisite>PrecisionRifling</researchPrerequisite>
		<AllowWithRunAndGun>false</AllowWithRunAndGun>
	</Operation>

	<!-- ========== Carbine ========== -->

	<Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
		<defName>Gun_Caseless_Carbine</defName>
		<statBases>
			<Mass>3.1</Mass>
			<RangedWeapon_Cooldown>0.36</RangedWeapon_Cooldown>
			<SightsEfficiency>1.0</SightsEfficiency>
			<ShotSpread>0.09</ShotSpread>
			<SwayFactor>1.13</SwayFactor>
			<Bulk>7.62</Bulk>
			<WorkToMake>33000</WorkToMake>
		</statBases>
		<costList>
			<Steel>40</Steel>
			<ComponentIndustrial>5</ComponentIndustrial>
			<Chemfuel>10</Chemfuel>
		</costList>
		<Properties>
			<recoilAmount>1.41</recoilAmount>
			<verbClass>CombatExtended.Verb_ShootCE</verbClass>
			<hasStandardCommand>true</hasStandardCommand>
			<defaultProjectile>Bullet_473x33mmCaseless_FMJ</defaultProjectile>
			<warmupTime>0.9</warmupTime>
			<range>48</range>
			<burstShotCount>6</burstShotCount>
			<ticksBetweenBurstShots>4</ticksBetweenBurstShots>
			<soundCast>Shot_CAR</soundCast>
			<soundCastTail>GunTail_Medium</soundCastTail>
			<muzzleFlashScale>7</muzzleFlashScale>
		</Properties>
		<AmmoUser>
			<magazineSize>50</magazineSize>
			<reloadTime>4</reloadTime>
			<ammoSet>AmmoSet_473x33mmCaseless</ammoSet>
		</AmmoUser>
		<FireModes>
			<aimedBurstShotCount>3</aimedBurstShotCount>
			<aiUseBurstMode>TRUE</aiUseBurstMode>
			<aiAimMode>AimedShot</aiAimMode>
		</FireModes>
		<weaponTags>
			<li>CE_AI_AR</li>
			<li>CE_AI_BROOM</li>
		</weaponTags>
		<researchPrerequisite>GasOperation</researchPrerequisite>
	</Operation>

	<!-- ========== GMA M901 ========== -->

	<Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
		<defName>Gun_Caseless_SniperRifle</defName>
		<statBases>
			<Mass>4.6</Mass>
			<RangedWeapon_Cooldown>0.56</RangedWeapon_Cooldown>
			<SightsEfficiency>2.6</SightsEfficiency>
			<ShotSpread>0.06</ShotSpread>
			<SwayFactor>1</SwayFactor>
			<Bulk>9.7</Bulk>
			<WorkToMake>61000</WorkToMake>
		</statBases>
		<costList>
			<Steel>50</Steel>
			<Chemfuel>15</Chemfuel>
			<Plasteel>30</Plasteel>
			<ComponentIndustrial>11</ComponentIndustrial>
		</costList>
		<Properties>
			<recoilAmount>0.74</recoilAmount> <!-- Original 1.47 -->
			<verbClass>CombatExtended.Verb_ShootCE</verbClass>
			<hasStandardCommand>true</hasStandardCommand>
			<defaultProjectile>Bullet_77x49mmPC_FMJ</defaultProjectile>
			<burstShotCount>2</burstShotCount>
			<ticksBetweenBurstShots>2</ticksBetweenBurstShots>
			<warmupTime>1.8</warmupTime>
			<range>68</range>
			<soundCast>Shot_csniper</soundCast>
			<soundCastTail>GunTail_Heavy</soundCastTail>
			<muzzleFlashScale>10</muzzleFlashScale>
		</Properties>
		<AmmoUser>
			<magazineSize>8</magazineSize>
			<reloadTime>4.5</reloadTime>
			<ammoSet>AmmoSet_77x49mmPC</ammoSet>
		</AmmoUser>
		<FireModes>
			<aimedBurstShotCount>2</aimedBurstShotCount>
			<aiUseBurstMode>TRUE</aiUseBurstMode>
			<aiAimMode>AimedShot</aiAimMode>
		</FireModes>
		<weaponTags>
			<li>CE_AI_SR</li>
			<li>Bipod_DMR</li>
		</weaponTags>
		<researchPrerequisite>PrecisionRifling</researchPrerequisite>
		<AllowWithRunAndGun>false</AllowWithRunAndGun>
	</Operation>

	<!-- ========== bolty ========== -->

	<Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
		<defName>Gun_Caseless_BoltAction</defName>
		<statBases>
			<Mass>6.7</Mass>
			<RangedWeapon_Cooldown>1.16</RangedWeapon_Cooldown>
			<SightsEfficiency>1.0</SightsEfficiency>
			<ShotSpread>0.06</ShotSpread>
			<SwayFactor>1.72</SwayFactor>
			<Bulk>6.3</Bulk>
			<WorkToMake>19500</WorkToMake>
		</statBases>
		<costList>
			<Steel>60</Steel>
			<ComponentIndustrial>2</ComponentIndustrial>
			<Chemfuel>15</Chemfuel>
		</costList>
		<Properties>
			<recoilAmount>1.33</recoilAmount>
			<verbClass>CombatExtended.Verb_ShootCE</verbClass>
			<hasStandardCommand>true</hasStandardCommand>
			<defaultProjectile>Bullet_77x49mmPC_FMJ</defaultProjectile>
			<warmupTime>1.1</warmupTime>
			<range>51</range>
			<soundCast>Shot_Bolty</soundCast>
			<soundCastTail>GunTail_Heavy</soundCastTail>
			<muzzleFlashScale>8</muzzleFlashScale>
		</Properties>
		<AmmoUser>
			<magazineSize>20</magazineSize>
			<reloadTime>4</reloadTime>
			<ammoSet>AmmoSet_77x49mmPC</ammoSet>
		</AmmoUser>
		<FireModes>
			<aiUseBurstMode>FALSE</aiUseBurstMode>
			<aiAimMode>AimedShot</aiAimMode>
		</FireModes>
		<weaponTags>
			<li>CE_AI_SR</li>
		</weaponTags>
		<researchPrerequisite>Gunsmithing</researchPrerequisite>
	</Operation>

	<!-- ========== battle rifle ========== -->

	<Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
		<defName>Gun_Caseless_BattleRifle</defName>
		<statBases>
			<Mass>8.89</Mass>
			<RangedWeapon_Cooldown>0.37</RangedWeapon_Cooldown>
			<SightsEfficiency>1.1</SightsEfficiency>
			<ShotSpread>0.04</ShotSpread>
			<SwayFactor>1.21</SwayFactor>
			<Bulk>8.9</Bulk>
			<WorkToMake>39500</WorkToMake>
		</statBases>
		<costList>
			<Steel>45</Steel>
			<ComponentIndustrial>7</ComponentIndustrial>
			<Chemfuel>10</Chemfuel>
		</costList>
		<Properties>
			<recoilAmount>1.91</recoilAmount>
			<verbClass>CombatExtended.Verb_ShootCE</verbClass>
			<hasStandardCommand>true</hasStandardCommand>
			<defaultProjectile>Bullet_77x49mmPC_FMJ</defaultProjectile>
			<warmupTime>1</warmupTime>
			<burstShotCount>6</burstShotCount>
			<ticksBetweenBurstShots>5</ticksBetweenBurstShots>
			<range>65</range>
			<soundCast>Shot_cbatrifle</soundCast>
			<soundCastTail>GunTail_Heavy</soundCastTail>
			<muzzleFlashScale>8</muzzleFlashScale>
		</Properties>
		<AmmoUser>
			<magazineSize>30</magazineSize>
			<reloadTime>4.5</reloadTime>
			<ammoSet>AmmoSet_77x49mmPC</ammoSet>
		</AmmoUser>
		<FireModes>
			<aimedBurstShotCount>3</aimedBurstShotCount>
			<aiUseBurstMode>TRUE</aiUseBurstMode>
			<aiAimMode>AimedShot</aiAimMode>
		</FireModes>
		<weaponTags>
			<li>IndustrialGunAdvanced</li>
			<li>CE_AI_AR</li>
		</weaponTags>
		<researchPrerequisite>PrecisionRifling</researchPrerequisite>
	</Operation>

	<!-- ===== Names ==== -->

	<Operation Class="PatchOperationReplace">
		<xpath>Defs/ThingDef[defName="Gun_Caseless_Pistol"]/label</xpath>
		<value>
			<label>K5</label>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<xpath>Defs/ThingDef[defName="Gun_Caseless_SMG"]/label</xpath>
		<value>
			<label>CS-8</label>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<xpath>Defs/ThingDef[defName="Gun_Caseless_Carbine"]/label</xpath>
		<value>
			<label>BZ-4</label>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<xpath>Defs/ThingDef[defName="Gun_Caseless_BurstRifle"]/label</xpath>
		<value>
			<label>G530</label>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<xpath>Defs/ThingDef[defName="Gun_Caseless_LMG"]/label</xpath>
		<value>
			<label>LMG11</label>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<xpath>Defs/ThingDef[defName="Gun_Caseless_SniperRifle"]/label</xpath>
		<value>
			<label>MX91</label>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<xpath>Defs/ThingDef[defName="Gun_Caseless_BoltAction"]/label</xpath>
		<value>
			<label>RimWarrior</label>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<xpath>Defs/ThingDef[defName="Gun_Caseless_BattleRifle"]/label</xpath>
		<value>
			<label>EM72</label>
		</value>
	</Operation>
</Patch>
