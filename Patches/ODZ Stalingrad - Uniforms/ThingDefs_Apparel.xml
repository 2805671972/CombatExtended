<?xml version="1.0" encoding="utf-8" ?>

<Patch>
    <Operation Class="PatchOperationFindMod">
        <mods>
            <li>[1.3] Stalingrad - Uniforms</li>
        </mods>
        <match Class="PatchOperationSequence">
            <operations>

                <!-- ======= Webbings ======= -->

                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[ defName="ODZ_WWII_GermanRiflemanKit" or defName="ODZ_WWII_GermanAssaultKit" or defName="ODZ_WWII_GermanMGKit" or defName="ODZ_WWII_GermanPlatoonLeaderKit" or defName="ODZ_WWII_SovietRiflemanKit" or defName="ODZ_WWII_SovietAssaultKit" or defName="ODZ_WWII_SovietMGKit" or defName="ODZ_WWII_SovietPlatoonLeaderKit"]/statBases</xpath>
                    <value>
                        <Bulk>5</Bulk>
                    </value>
                </li>

                <!-- ===== Coverage and Layer adjustments ===== -->
                <li Class="PatchOperationReplace">
                    <xpath>Defs/ThingDef[ defName="ODZ_WWII_GermanRiflemanKit" or defName="ODZ_WWII_GermanAssaultKit" or defName="ODZ_WWII_GermanMGKit" or defName="ODZ_WWII_GermanPlatoonLeaderKit" or defName="ODZ_WWII_SovietRiflemanKit" or defName="ODZ_WWII_SovietAssaultKit" or defName="ODZ_WWII_SovietMGKit" or defName="ODZ_WWII_SovietPlatoonLeaderKit"]/apparel/bodyPartGroups</xpath>
                    <value>
                        <bodyPartGroups>
                            <li>Shoulders</li>
                        </bodyPartGroups>
                    </value>
                </li>

                <li Class="PatchOperationReplace">
                    <xpath>Defs/ThingDef[ defName="ODZ_WWII_GermanRiflemanKit" or defName="ODZ_WWII_GermanAssaultKit" or defName="ODZ_WWII_GermanMGKit" or defName="ODZ_WWII_GermanPlatoonLeaderKit" or defName="ODZ_WWII_SovietRiflemanKit" or defName="ODZ_WWII_SovietAssaultKit" or defName="ODZ_WWII_SovietMGKit" or defName="ODZ_WWII_SovietPlatoonLeaderKit"]/apparel/layers</xpath>
                    <value>
                        <layers>
                            <li>Webbing</li>
                        </layers>
                    </value>
                </li>

                <!-- ===== Rifleman Kit ===== -->
                <li Class="PatchOperationReplace">
                    <xpath>Defs/ThingDef[ defName="ODZ_WWII_GermanRiflemanKit" or defName="ODZ_WWII_SovietRiflemanKit"]/equippedStatOffsets</xpath>
                    <value>
                        <equippedStatOffsets>
                            <CarryBulk>30</CarryBulk>
                            <AimingDelayFactor>-0.05</AimingDelayFactor>
                            <MedicalTendSpeed>0.05</MedicalTendSpeed>
                        </equippedStatOffsets>
                    </value>
                </li>

                <!-- ===== Assault Kit ===== -->
                <li Class="PatchOperationReplace">
                    <xpath>Defs/ThingDef[ defName="ODZ_WWII_GermanAssaultKit" or defName="ODZ_WWII_SovietAssaultKit"]/equippedStatOffsets</xpath>
                    <value>
                        <equippedStatOffsets>
                            <CarryBulk>25</CarryBulk>
                            <AimingDelayFactor>-0.08</AimingDelayFactor>
                            <MedicalTendSpeed>0.05</MedicalTendSpeed>
                        </equippedStatOffsets>
                    </value>
                </li>

                <!-- ===== Machinegunner Kit ===== -->
                <li Class="PatchOperationReplace">
                    <xpath>Defs/ThingDef[ defName="ODZ_WWII_GermanMGKit" or defName="ODZ_WWII_SovietMGKit"]/equippedStatOffsets</xpath>
                    <value>
                        <equippedStatOffsets>
                            <CarryBulk>20</CarryBulk>
                            <AimingDelayFactor>-0.10</AimingDelayFactor>
                            <MedicalTendSpeed>0.05</MedicalTendSpeed>
                        </equippedStatOffsets>
                    </value>
                </li>

                <!-- ===== Platoon Leader Kit ===== -->
                <li Class="PatchOperationReplace">
                    <xpath>Defs/ThingDef[ defName="ODZ_WWII_GermanPlatoonLeaderKit" or defName="ODZ_WWII_SovietPlatoonLeaderKit"]/equippedStatOffsets</xpath>
                    <value>
                        <equippedStatOffsets>
                            <CarryBulk>30</CarryBulk>
                            <AimingDelayFactor>-0.06</AimingDelayFactor>
                            <MedicalTendSpeed>0.05</MedicalTendSpeed>
                        </equippedStatOffsets>
                    </value>
                </li>

                <!-- ======= Headgear ======= -->
                <li Class="PatchOperationReplace">
                    <xpath>Defs/ThingDef[ defName="ODZ_WWII_GermanM42Stahlhelm" or defName="ODZ_WWII_SovietSSH40Helmet"]/statBases/StuffEffectMultiplierArmor</xpath>
                    <value>
                        <StuffEffectMultiplierArmor>4</StuffEffectMultiplierArmor>
                    </value>
                </li>

            </operations>
        </match>
    </Operation>
</Patch>