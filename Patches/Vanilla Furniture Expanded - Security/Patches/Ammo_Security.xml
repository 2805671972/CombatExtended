<?xml version="1.0" encoding="UTF-8"?>
<Patch>

	<Operation Class="PatchOperationFindMod">
	<mods>
		<li>Vanilla Furniture Expanded - Security</li>
	</mods>
	<match Class="PatchOperationSequence">
	<operations>

	<!-- ========== EMP Ammo ========== -->
	<li Class="PatchOperationAdd">
		<xpath>Defs</xpath>
		<value>
			<ThingDef ParentName="BaseBullet">
				<defName>Bullet_EMPCannon</defName>
				<label>EMP Blast</label>
				<thingClass>CombatExtended.ProjectileCE_Explosive</thingClass>			
				<graphicData>
				  <texPath>Things/Projectile/Bullet_EMPCannon</texPath>
				  <graphicClass>Graphic_Single</graphicClass>
				  <shaderType>TransparentPostLight</shaderType>
				</graphicData>
				<projectile Class="CombatExtended.ProjectilePropertiesCE">
				  <damageDef>EMP</damageDef>
				  <damageAmountBase>42</damageAmountBase>
				  <explosionRadius>4</explosionRadius>
				  <soundExplode>MortarBomb_Explode</soundExplode>				
				  <speed>130</speed>
				  <flyOverhead>false</flyOverhead>
				  <dropsCasings>false</dropsCasings>
				  <applyDamageToExplosionCellsNeighbors>true</applyDamageToExplosionCellsNeighbors>
				</projectile>
			</ThingDef>
		</value>
    </li>

	<!-- ========== Catapult Ammo ========== -->
	<li Class="PatchOperationAttributeAdd">
		<xpath>Defs/ThingDef[
		defName = "ChunkSandstone" or
		 defName = "ChunkGranite" or
		 defName = "ChunkMarble" or	
		 defName = "ChunkLimestone" or	
		 defName = "ChunkSlate"		 		 	 
		 ]</xpath>
		<attribute>Class</attribute>
		<value>CombatExtended.AmmoDef</value>
	</li>

	<li Class="PatchOperationAdd">
		<xpath>Defs/ThingDef[
		defName = "ChunkSandstone" or
		 defName = "ChunkGranite" or
		 defName = "ChunkMarble" or	
		 defName = "ChunkLimestone" or	
		 defName = "ChunkSlate"		 		 	 
		 ]</xpath>
		<value>
		 <thingCategories>
		  <li>AmmoCatapultStone</li>
    	 </thingCategories>		  
		</value>
	</li>
	
	<li Class="PatchOperationAdd">
		<xpath>/Defs/ThingDef[defName="ChunkSandstone"]</xpath>
		<value>
			<ammoClass>CatapultStone_Sandstone</ammoClass>
		</value>
	</li>

	<li Class="PatchOperationAdd">
		<xpath>/Defs/ThingDef[defName="ChunkSlate"]</xpath>
		<value>
			<ammoClass>CatapultStone_Slate</ammoClass>
		</value>
	</li>

	<li Class="PatchOperationAdd">
		<xpath>/Defs/ThingDef[defName="ChunkGranite"]</xpath>
		<value>
			<ammoClass>CatapultStone_Granite</ammoClass>
		</value>
	</li>

	<li Class="PatchOperationAdd">
		<xpath>/Defs/ThingDef[defName="ChunkMarble"]</xpath>
		<value>
			<ammoClass>CatapultStone_Marble</ammoClass>
		</value>
	</li>

	<li Class="PatchOperationAdd">
		<xpath>/Defs/ThingDef[defName="ChunkLimestone"]</xpath>
		<value>
			<ammoClass>CatapultStone_Limestone</ammoClass>
		</value>
	</li>

	</operations>
	</match>
	</Operation>
</Patch>   